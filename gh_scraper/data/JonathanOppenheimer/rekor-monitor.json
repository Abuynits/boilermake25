{"description": "Log monitor for Rekor to verify immutability and monitor entries", "readme": "# Rekor Log Monitor\n\nRekor Log Monitor provides an easy-to-use monitor to verify log consistency,\nthat the log is immutability and append-only. Monitoring is critical to\nthe transparency log ecosystem, as logs are tamper-evident but not tamper-proof.\n\nTo run, create a GitHub Actions workflow that uses the\n[reusable monitoring workflow](https://github.com/sigstore/rekor-monitor/blob/main/.github/workflows/reusable_monitoring.yml).\nIt is recommended to run the log monitor every hour for optimal performance.\n\nExample workflow:\n\n```\nname: Rekor log monitor\non:\n  schedule:\n    - cron: '0 * * * *' # every hour\n\npermissions: read-all\n\njobs:\n  run_consistency_proof:\n    permissions:\n      contents: read # Needed to checkout repositories\n      issues: write # Needed if you set \"file_issue: true\"\n      id-token: write # Needed to detect the current reusable repository and ref\n    uses: sigstore/rekor-monitor/.github/workflows/reusable_monitoring.yml@main\n    with:\n      file_issue: true # Strongly recommended: Files an issue on monitoring failure\n      artifact_retention_days: 14 # Optional, default is 14: Must be longer than the cron job frequency\n```\n\nCaveats:\n\n* The log monitoring job should not be run concurrently with other log monitoring jobs in the same repository\n* If running as a cron job, `artifact_retention_days` must be longer than the cron job frequency\n\n## Identity monitoring\n\nYou can also specify a list of identities to monitor. Currently, only identities from the certificate's\nSubject Alternative Name (SAN) field will be matched, and only for the hashedrekord Rekor entry type.\n\nNote: The log monitor only starts monitoring from the latest checkpoint. If you want to search previous\nentries, you will need to query the log.\n\nExample workflow below:\n\n```\nname: Rekor log and identity monitor\non:\n  schedule:\n    - cron: '0 * * * *' # every hour\n\npermissions: read-all\n\njobs:\n  run_consistency_proof:\n    permissions:\n      contents: read # Needed to checkout repositories\n      issues: write # Needed if you set \"file_issue: true\"\n      id-token: write # Needed to detect the current reusable repository and ref\n    uses: sigstore/rekor-monitor/.github/workflows/reusable_monitoring.yaml@main\n    with:\n      file_issue: true # Strongly recommended: Files an issue on monitoring failure\n      artifact_retention_days: 14 # Optional, default is 14: Must be longer than the cron job frequency\n      identities: |\n        certIdentities:\n          - certSubject: user@domain.com\n          - certSubject: otheruser@domain.com\n            issuers:\n              - https://accounts.google.com\n              - https://github.com/login\n        subjects:\n          - subject@domain.com\n        fingerprints:\n          - A0B1C2D3E4F5\n```\n\nIn this example, the monitor will log:\n\n* Entries that contain a certificate whose SAN is `user@domain.com`\n* Entries whose SAN is `otheruser@domain.com` and the OIDC provider specified in a [custom extension](https://github.com/sigstore/fulcio/blob/main/docs/oid-info.md#1361415726418--issuer-v2) matches one of the specified issuers (Google or GitHub in this example)\n* Non-certificate entries, such as PGP or SSH keys, whose subject matches `subject@domain.com`\n* Entries whose key or certificate fingerprint matches `A0B1C2D3E4F5`\n\nFingerprint values are as follows:\n\n* For keys, certificates, and minisign, hex-encoded SHA-256 digest of the DER-encoded PKIX public key or certificate\n* For SSH and PGP, the standard for each ecosystem:\n   * For SSH, unpadded base-64 encoded SHA-256 digest of the key\n\t * For PGP, hex-encoded SHA-1 digest of a key, which can be either a primary key or subkey\n\nUpcoming features:\n\n* Creating issues when identities are found\n* Support for other identities\n   * CI identity values in Fulcio certificates\n\n## Security\n\nPlease report any vulnerabilities following Sigstore's [security process](https://github.com/sigstore/.github/blob/main/SECURITY.md).\n", "prev_commits": ["Add support for OID extension monitoring via YAML config"], "title": "rekor-monitor", "owner": "JonathanOppenheimer", "commits": 1}